<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>IDV ‚Äì Assignment Hub</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    :root{
      --bg:#f4f6fb;
      --accent:#0047ab;
      --accent-soft:#e3ecff;
      --card-bg:#ffffff;
      --text-main:#222222;
      --text-muted:#666666;
      --shadow-soft:0 10px 25px rgba(0,0,0,0.08);
      --radius-lg:18px;
    }
    *{
      box-sizing:border-box;
      margin:0;
      padding:0;
    }

    html, body{
      margin:0;
      padding:0;
      width:100%;
      height:100%;
      overflow-x:hidden; /* no horizontal scrolling on hub */
    }

    body{
      font-family:"Times New Roman", Georgia, serif;
      background:radial-gradient(circle at top left,#e3efff 0%,#fdfdff 35%,#f8f1ff 100%);
      color:var(--text-main);
      display:flex;
      justify-content:center;
    }

    #page{
      max-width:1200px;
      width:100%;
      min-height:100vh;
      margin:26px auto 40px;
      padding:0 18px;
      display:flex;
      flex-direction:column;
    }

    header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      margin-bottom:22px;
      gap:18px;
    }
    #title-block{ flex:1; }
    #title-main{
      font-size:30px;
      font-weight:bold;
      letter-spacing:0.5px;
      margin-bottom:4px;
    }
    #title-sub{
      font-size:15px;
      color:var(--text-muted);
      max-width:520px;
      line-height:1.4;
    }
    #title-pill{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:4px 10px;
      border-radius:999px;
      background:var(--accent-soft);
      color:var(--accent);
      font-size:12px;
      margin-bottom:8px;
    }
    #title-pill span.emoji{font-size:14px;}

    #search-panel{
      width:330px;
      background:var(--card-bg);
      padding:12px 14px 14px;
      border-radius:var(--radius-lg);
      box-shadow:var(--shadow-soft);
      position:relative;
      overflow:hidden;
      flex-shrink:0;
    }
    #search-panel::before{
      content:"";
      position:absolute;
      inset:auto -40px -60px;
      height:120px;
      background:radial-gradient(circle at top,#ccd9ff 0%,transparent 60%);
      opacity:0.6;
      pointer-events:none;
    }
    #search-label{
      font-size:12px;
      text-transform:uppercase;
      letter-spacing:1px;
      color:var(--text-muted);
      margin-bottom:4px;
    }
    #search-input-wrap{
      position:relative;
      margin-bottom:6px;
    }
    #searchInput{
      width:100%;
      padding:7px 28px 7px 9px;
      border-radius:999px;
      border:1px solid #d0d7ff;
      font-size:14px;
      outline:none;
    }
    #searchInput:focus{
      border-color:var(--accent);
      box-shadow:0 0 0 1px rgba(0,71,171,0.1);
    }
    #search-magnifier{
      position:absolute;
      right:8px;
      top:50%;
      transform:translateY(-50%);
      font-size:14px;
      color:var(--accent);
      pointer-events:none;
    }
    #search-hint{
      font-size:11px;
      color:var(--text-muted);
    }
    #search-hint kbd{
      display:inline-block;
      padding:1px 4px;
      border-radius:4px;
      border:1px solid #ccd;
      font-size:10px;
      background:#f8f8ff;
      margin-inline:1px;
    }
    #suggestions{
      position:relative;
      margin-top:6px;
      z-index:10;
    }
    #suggestions-list{
      list-style:none;
      margin:0;
      padding:4px 0 2px;
      background:rgba(255,255,255,0.9);
      border-radius:12px;
      border:1px solid #dde3ff;
      box-shadow:0 8px 18px rgba(0,0,0,0.06);
      max-height:170px;
      overflow-y:auto;
      display:none;
    }
    #suggestions-list li{
      padding:4px 10px;
      font-size:13px;
      cursor:pointer;
      display:flex;
      align-items:center;
      gap:6px;
    }
    #suggestions-list li span.badge{
      font-size:11px;
      padding:1px 6px;
      border-radius:999px;
      background:var(--accent-soft);
      color:var(--accent);
    }
    #suggestions-list li:hover,
    #suggestions-list li.active{
      background:#edf2ff;
    }

    /* --- MAIN LAYOUT --- */
    main{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:18px;
      flex:1;
    }

    /* --- CARDS 2√ó2 --- */
    #cards{
      display:grid;
      grid-template-columns:repeat(2, minmax(0, 1fr));
      gap:16px 18px;
      max-width:800px;
      width:100%;
      margin:0 auto;
    }

    @media (max-width:700px){
      #cards{
        grid-template-columns:1fr;
      }
    }

    .card{
      background:var(--card-bg);
      border-radius:var(--radius-lg);
      padding:12px 13px 11px;
      box-shadow:var(--shadow-soft);
      cursor:pointer;
      position:relative;
      overflow:hidden;
      transform:translateY(10px);
      opacity:0;
      animation:cardIn 0.4s ease forwards;
      transition:transform 0.18s ease, box-shadow 0.18s ease;
    }
    .card:nth-child(2){animation-delay:0.06s;}
    .card:nth-child(3){animation-delay:0.12s;}
    .card:nth-child(4){animation-delay:0.18s;}
    .card:hover{
      transform:translateY(2px) scale(1.01);
      box-shadow:0 16px 30px rgba(0,0,0,0.12);
    }
    .card-header-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom:3px;
    }
    .card-title{
      font-size:17px;
      font-weight:bold;
    }
    .card-chip{
      font-size:11px;
      padding:2px 7px;
      border-radius:999px;
      background:var(--accent-soft);
      color:var(--accent);
      display:inline-flex;
      align-items:center;
      gap:4px;
    }
    .card-chip span.dot{
      width:6px;
      height:6px;
      border-radius:50%;
      background:var(--accent);
    }
    .card-meta{
      font-size:11px;
      color:var(--text-muted);
      margin-bottom:4px;
    }
    .card-desc{
      font-size:13px;
      color:var(--text-main);
    }
    .card-footer{
      margin-top:6px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-size:11px;
      color:var(--text-muted);
    }
    .card-footer span.link-hint{
      display:inline-flex;
      align-items:center;
      gap:4px;
    }
    .card-footer span.link-hint::after{
      content:"‚Ü≥";
      font-size:13px;
    }
    .card-footer span.tagline{
      font-style:italic;
    }
    .hidden-card{
      display:none;
    }

    /* --- Viewer --- */

    #viewer{
      background:var(--card-bg);
      border-radius:var(--radius-lg);
      box-shadow:var(--shadow-soft);
      padding:10px;
      display:none;           /* hidden on load */
      flex-direction:column;
      width:100%;
      max-width:1200px;
    }
    #viewer-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom:6px;
      gap:10px;
      flex-shrink:0;
    }
    #viewer-title{
      font-size:18px;
      font-weight:bold;
    }
    #viewer-sub{
      font-size:12px;
      color:var(--text-muted);
    }
    #viewer-actions{
      display:flex;
      align-items:center;
      gap:8px;
    }
    #backBtn,
    #openFullBtn{
      font-size:12px;
      padding:5px 10px;
      border-radius:999px;
      border:1px solid #c5cffb;
      background:#eef2ff;
      color:var(--accent);
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:4px;
    }
    #openFullBtn span.icon,
    #backBtn span.icon{
      font-size:13px;
    }
    #openFullBtn:disabled,
    #backBtn:disabled{
      opacity:0.5;
      cursor:not-allowed;
    }
    #openFullBtn:not(:disabled):hover,
    #backBtn:not(:disabled):hover{
      background:#dde4ff;
    }

    #viewer-iframe-wrap{
      flex:1;                 /* take remaining height */
      border-radius:14px;
      overflow:hidden;
      border:1px solid #dde3ff;
      background:#fafbff;
      display:flex;
    }
    #viewer-iframe{
      width:100%;
      height:100%;           /* fill viewer vertically */
      border:none;
      display:none;
    }
    #viewer-placeholder{
      flex:1;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      font-size:13px;
      color:var(--text-muted);
      padding:20px 10px;
      text-align:center;
      gap:4px;
    }
    #viewer-placeholder span.emoji{
      font-size:28px;
      margin-bottom:6px;
    }

    @keyframes cardIn{
      to{
        opacity:1;
        transform:translateY(0);
      }
    }

    /* --- Expanded viewer mode: viewer fits viewport height --- */
    body.viewer-expanded #page{
      margin-top:10px;
      margin-bottom:10px;
    }
    body.viewer-expanded main{
      flex:1;
      align-items:stretch;
    }
    body.viewer-expanded #cards{
      display:none;
    }
    body.viewer-expanded #viewer{
      display:flex;
      height:calc(100vh - 120px);  /* viewer ‚âà screen height */
    }

    @media (max-width:900px){
      header{
        flex-direction:column;
      }
      #search-panel{
        width:100%;
      }
      #viewer-header{
        flex-direction:column;
        align-items:flex-start;
      }
      #viewer-actions{
        align-self:flex-end;
      }
    }
  </style>
</head>
<body>
  <div id="page">
    <header>
      <div id="title-block">
        <div id="title-pill">
          <span class="emoji">üìä</span>
          <span>IDV ¬∑ Assignment Collection</span>
        </div>
        <div id="title-main">Interactive Assignment Hub</div>
        <p id="title-sub">
          Use this homepage as a control panel: search and open any assignment, then view it in full width.
        </p>
      </div>
      <aside id="search-panel">
        <div id="search-label">Search assignments</div>
        <div id="search-input-wrap">
          <input type="text" id="searchInput" placeholder="Type title, topic, or keyword‚Ä¶" autocomplete="off" />
          <span id="search-magnifier">üîç</span>
        </div>
        <div id="search-hint">
          Suggestions appear as you type. Use your mouse or <kbd>‚Üë</kbd><kbd>‚Üì</kbd> to browse, <kbd>Enter</kbd> to open.
        </div>
        <div id="suggestions">
          <ul id="suggestions-list"></ul>
        </div>
      </aside>
    </header>

    <main>
      <section id="cards">
        <!-- Assignment 1 -->
        <article class="card" data-id="1" data-keywords="assignment 1 api driven data table fetch json rest dynamic">
          <div class="card-header-row">
            <h2 class="card-title">Assignment 1 ‚Äì API-Driven Data Table</h2>
            <div class="card-chip"><span class="dot"></span>HTML + D3.js</div>
          </div>
          <div class="card-meta">APIs ¬∑ JSON ¬∑ dynamic tables</div>
          <p class="card-desc">
            Builds a data table whose contents are loaded and updated from an external API.
          </p>
          <div class="card-footer">
            <span class="link-hint">Open assignment</span>
            <span class="tagline">Start from live data</span>
          </div>
        </article>

        <!-- Assignment 2 -->
        <article class="card" data-id="2" data-keywords="assignment 2 svg transformations icons mirror rotate scale squeeze">
          <div class="card-header-row">
            <h2 class="card-title">Assignment 2 ‚Äì SVG Transformations</h2>
            <div class="card-chip"><span class="dot"></span>HTML + SVG</div>
          </div>
          <div class="card-meta">SVG ¬∑ mirroring ¬∑ rotation ¬∑ scaling</div>
          <p class="card-desc">
            A small SVG gallery demonstrating mirror, rotation, scaling and other transformations.
          </p>
          <div class="card-footer">
            <span class="link-hint">Open assignment</span>
            <span class="tagline">Geometry in action</span>
          </div>
        </article>

        <!-- Assignment 3 -->
        <article class="card" data-id="3" data-keywords="assignment 3 interactive chart transitions animation d3">
          <div class="card-header-row">
            <h2 class="card-title">Assignment 3 ‚Äì Interactive Chart with Transitions</h2>
            <div class="card-chip"><span class="dot"></span>D3.js Dashboard</div>
          </div>
          <div class="card-meta">Charts ¬∑ interaction ¬∑ animated transitions</div>
          <p class="card-desc">
            Converts normal chart into an interactive chart with smooth transitions between views.
          </p>
          <div class="card-footer">
            <span class="link-hint">Open assignment</span>
            <span class="tagline">See patterns move</span>
          </div>
        </article>

        <!-- Assignment 4 -->
        <article class="card" data-id="4" data-keywords="assignment 4 complex grouped data visualizations multi chart dashboard">
          <div class="card-header-row">
            <h2 class="card-title">Assignment 4 ‚Äì Complex/Grouped Data Visualizations</h2>
            <div class="card-chip"><span class="dot"></span>D3.js ¬∑ Multi-chart</div>
          </div>
          <div class="card-meta">Grouped bars ¬∑ multiple datasets ¬∑ controls</div>
          <p class="card-desc">
            A richer dashboard combining complex and grouped visualizations across several datasets.
          </p>
          <div class="card-footer">
            <span class="link-hint">Open assignment</span>
            <span class="tagline">Compare many dimensions</span>
          </div>
        </article>
      </section>

      <section id="viewer">
        <div id="viewer-header">
          <div>
            <div id="viewer-title">Viewer</div>
            <div id="viewer-sub">Click a card to load an assignment page here.</div>
          </div>
          <div id="viewer-actions">
            <button id="backBtn" disabled>
              <span class="icon">‚Üê</span>
              <span>Back to all assignments</span>
            </button>
            <button id="openFullBtn" disabled>
              <span class="icon">‚õ∂</span>
              <span>Open in new tab</span>
            </button>
          </div>
        </div>
        <div id="viewer-iframe-wrap">
          <div id="viewer-placeholder">
            <span class="emoji">üëÜ</span>
            <div>Select an assignment on the cards page.</div>
            <div>This panel will then show the exact HTML output from your submission.</div>
          </div>
          <iframe id="viewer-iframe" src=""></iframe>
        </div>
      </section>
    </main>
  </div>

  <script>
    const assignments = [
      {
        id: "1",
        title: "Assignment 1 ‚Äì API-Driven Data Table",
        path: "assignment1/IDV-assignment1-main/index.html",
        keywords: "assignment 1 api driven data table json rest fetch dynamic"
      },
      {
        id: "2",
        title: "Assignment 2 ‚Äì SVG Transformations",
        path: "assignment2/IDV-assignment2-main/index.html",
        keywords: "assignment 2 svg transformations icons mirror rotate scale squeeze"
      },
      {
        id: "3",
        title: "Assignment 3 ‚Äì Interactive Chart with Transitions",
        path: "assignment3/IDV-assignment3-main/index.html",
        keywords: "assignment 3 interactive chart transitions animation d3 dashboard"
      },
      {
        id: "4",
        title: "Assignment 4 ‚Äì Complex/Grouped Data Visualizations",
        path: "assignment4/IDV-assignment4-main/index.html",
        keywords: "assignment 4 complex grouped data visualizations multi chart dashboard"
      }
    ];

    const cards = Array.from(document.querySelectorAll(".card"));
    const iframe = document.getElementById("viewer-iframe");
    const placeholder = document.getElementById("viewer-placeholder");
    const viewerTitle = document.getElementById("viewer-title");
    const viewerSub = document.getElementById("viewer-sub");
    const searchInput = document.getElementById("searchInput");
    const suggestionsList = document.getElementById("suggestions-list");
    const openFullBtn = document.getElementById("openFullBtn");
    const backBtn = document.getElementById("backBtn");
    const viewerSection = document.getElementById("viewer");

    let currentAssignment = null;

    function setExpanded(on){
      document.body.classList.toggle("viewer-expanded", on);
      if(on){
        viewerSection.style.display = "flex";
      }else{
        viewerSection.style.display = "none";
      }
    }

    function resetViewerToInitial(){
      iframe.style.display = "none";
      placeholder.style.display = "flex";
      iframe.src = "";
      viewerTitle.textContent = "Viewer";
      viewerSub.textContent = "Click a card to load an assignment page here.";
      cards.forEach(card => card.style.outline = "none");
      openFullBtn.disabled = true;
      backBtn.disabled = true;
      currentAssignment = null;
      setExpanded(false);
    }

    function loadAssignment(id){
      const a = assignments.find(x => x.id === id);
      if(!a) return;
      currentAssignment = a;

      iframe.style.display = "block";
      placeholder.style.display = "none";
      iframe.src = a.path;
      viewerTitle.textContent = a.title;
      viewerSub.textContent = "Showing original output: " + a.path;

      cards.forEach(card => {
        card.style.outline = (card.dataset.id === id) ? "2px solid #0047ab" : "none";
      });

      openFullBtn.disabled = false;
      backBtn.disabled = false;

      setExpanded(true);
    }

    cards.forEach(card => {
      card.addEventListener("click", () => loadAssignment(card.dataset.id));
    });

    openFullBtn.addEventListener("click", () => {
      if(currentAssignment){
        window.open(currentAssignment.path, "_blank");
      }
    });

    backBtn.addEventListener("click", () => {
      resetViewerToInitial();
    });

    function updateFilterAndSuggestions(){
      const q = searchInput.value.trim().toLowerCase();
      suggestionsList.innerHTML = "";

      cards.forEach(card => {
        const text = (card.textContent || "").toLowerCase();
        if(q === "" || text.includes(q)){
          card.classList.remove("hidden-card");
        }else{
          card.classList.add("hidden-card");
        }
      });

      if(q === ""){
        suggestionsList.style.display = "none";
        return;
      }

      const matches = assignments.filter(a =>
        a.title.toLowerCase().includes(q) || a.keywords.toLowerCase().includes(q)
      ).slice(0,6);

      if(matches.length === 0){
        suggestionsList.style.display = "none";
        return;
      }

      matches.forEach(m => {
        const li = document.createElement("li");
        li.dataset.id = m.id;
        li.innerHTML = `<span class="badge">A${m.id}</span> <span>${m.title}</span>`;
        li.addEventListener("click", () => {
          loadAssignment(m.id);
          searchInput.blur();
          suggestionsList.style.display = "none";
        });
        suggestionsList.appendChild(li);
      });
      suggestionsList.style.display = "block";
    }

    searchInput.addEventListener("input", updateFilterAndSuggestions);
    searchInput.addEventListener("focus", updateFilterAndSuggestions);

    document.addEventListener("click", (evt) => {
      if(!evt.target.closest("#search-panel")){
        suggestionsList.style.display = "none";
      }
    });

    searchInput.addEventListener("keydown", (evt) => {
      if(suggestionsList.style.display !== "block") return;
      const items = Array.from(suggestionsList.querySelectorAll("li"));
      if(items.length === 0) return;

      let index = items.findIndex(li => li.classList.contains("active"));

      if(evt.key === "ArrowDown"){
        evt.preventDefault();
        index = (index + 1) % items.length;
      }else if(evt.key === "ArrowUp"){
        evt.preventDefault();
        index = (index - 1 + items.length) % items.length;
      }else if(evt.key === "Enter"){
        const active = suggestionsList.querySelector("li.active") || items[0];
        if(active){
          evt.preventDefault();
          loadAssignment(active.dataset.id);
          suggestionsList.style.display = "none";
          searchInput.blur();
        }
        return;
      }else{
        return;
      }

      items.forEach(li => li.classList.remove("active"));
      items[index].classList.add("active");
      items[index].scrollIntoView({block:"nearest"});
    });

    // Inject CSS into iframe to disable horizontal scrolling in assignment pages
    iframe.addEventListener("load", () => {
      try{
        const doc = iframe.contentWindow.document;
        const style = doc.createElement("style");
        style.textContent = `
          html, body {
            margin:0;
            padding:0;
            overflow-x:hidden !important;
          }
        `;
        doc.head.appendChild(style);
      }catch(e){
        // if anything fails (cross-origin), ignore
      }
    });

    // initial state
    resetViewerToInitial();
  </script>
</body>
</html>
